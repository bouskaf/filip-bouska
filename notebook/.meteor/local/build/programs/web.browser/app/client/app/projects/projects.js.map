{"version":3,"sources":["meteor://ðŸ’»app/client/app/projects/projects.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/client/app/projects/projects.js","sourcesContent":["function scroll(project) {\n\tif ( project ) {\n\t\tdocument.documentElement.classList.add('overflow');\n\t} else {\n\t\tdocument.documentElement.classList.remove('overflow');\n\t}\n}\n\nTracker.autorun(function () {\n\tscroll(Session.get('viewingProject'));\n});\n\nTemplate.projects.onRendered(function() {\n\tdocument.documentElement.classList.add('no-scroll');\n});\n\nTemplate.projects.helpers({\n\tviewingProject: function() {\n\t\treturn Session.get('viewingProject');\n\t},\n\tprojects: function() {\n\t\tvar filter = {},\n\t\t\tnow = Session.get('now') || Date.now(),\n\t\t\tresults;\n\n\t\t// if not logged in, limit visible projects\n\t\tif ( !Meteor.user() ) {\n\t\t\tfilter.status = 'public';\n\t\t\tfilter.published = { $lte: now };\n\t\t}\n\n\t\tSession.set('loading', true);\n\n\t\t// setup the subscription\n\t\tMeteor.subscribe('projects', function(err, response) {\n\t\t\tif ( err ) {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t});\n\n\t\tresults = Projects.find( { slug: { $not: 'about' } }, { sort: { published: 1 } } );\n\n\t\tSession.set('loading', false);\n\t\treturn results.count() ? results : false;\n\t},\n\tthisProject: function() {\n\t\tvar slug = FlowRouter.getParam('project') || Session.get('project'),\n\t\t\tproject;\n\n\t\tif ( slug ) {\n\t\t\tSession.set('project', slug);\n\t\t\tproject = Projects.findOne( { slug: slug } ) || {};\n\n\t\t\tif ( slug === 'new' ) {\n\t\t\t\tSession.set('editingProject', true);\n\t\t\t\treturn {};\n\t\t\t} else {\n\t\t\t\tif ( !project._id ) {\n\t\t\t\t\tFlowRouter.go('/projects');\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tproject = {};\n\t\t}\n\n\t\treturn project;\n\t}\n});\n\nTemplate.projects.events({\n\t'click section figure a': function(e) {\n\t\t// e.preventDefault();\n\n\t\tSession.set('viewingProject', true);\n\t},\n\t'click #toolbar .new-project': function(e) {\n\t\tSession.set('viewingProject', 'new');\n\t\tSession.set('editingProject', true);\n\t},\n\t'click #toolbar .logout': function(e) {\n\t\tMeteor.logout();\n\t}\n});"]}