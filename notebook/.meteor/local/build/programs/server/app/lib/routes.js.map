{"version":3,"sources":["meteor://ðŸ’»app/lib/routes.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/lib/routes.js","sourcesContent":["// reusable function to reset application states\nfunction reset() {\n\tSession.set('viewingBlog', false);\n\tSession.set('editing', false);\n\tSession.set('viewingProject', undefined);\n\tSession.set('editingProject', undefined);\n\tSession.set('singlePost', false);\n\tSession.set('modal', undefined);\n}\n\nFlowRouter.notFound = {\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\tFlowRouter.go('/');\n\t\t}\n\t}\n};\n\n// root\nFlowRouter.route('/', {\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\treset();\n\t\t\tdocument.title = 'Filip\\'s notebook';\n\t\t\tBlazeLayout.render('main', {content: 'home'});\n\t\t}\n\t}\n});\n\n// login route\nvar accounts = FlowRouter.group({\n\tname: 'accounts'\n});\n\naccounts.route('/admin', {\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\tif ( !!Meteor.user() ) {\n\t\t\t\tFlowRouter.go('/');\n\t\t\t} else {\n\t\t\t\treset();\n\t\t\t\tdocument.title = 'Log In';\n\t\t\t\tBlazeLayout.render('main', {content: 'admin'});\n\t\t\t}\n\t\t}\n\t}\n});\n\n// blog routes\nvar blog = FlowRouter.group({\n\tprefix: '/blog',\n\tname: 'blog'\n});\n\nblog.route('/', {\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\treset();\n\t\t\tvar search = FlowRouter.getQueryParam('search');\n\n\t\t\tif ( search ) {\n\t\t\t\tSession.set('searching', true);\n\t\t\t\tSession.set('filter', search);\n\t\t\t} else {\n\t\t\t\tSession.set('searching', false);\n\t\t\t\tSession.set('filter', '');\n\t\t\t}\n\n\t\t\tSession.set('viewingBlog', true);\n\t\t\tdocument.title = 'filip's notebook â†’ blog';\n\t\t\tBlazeLayout.render('main', {content: 'home'});\n\t\t}\n\t}\n});\n\nblog.route('/:slug', {\n\t// preload subscription\n\tsubscriptions: function(params, queryParams) {\n\t\tif ( params.slug === 'new' ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.register('post', Meteor.subscribe('posts', { slug: params.slug }, {}, ''));\n\t\t}\n\t},\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\tif ( FlowRouter.getParam('slug') === 'new' ) {\n\t\t\t\tSession.set('editing', true);\n\t\t\t}\n\t\t\treset();\n\t\t\tSession.set('viewingBlog', true);\n\t\t\tSession.set('singlePost', true);\n\t\t\t\n\t\t\tvar post = Posts.findOne({ slug: FlowRouter.getParam('slug') });\n\t\t\t\n\t\t\tif ( post ) {\n\t\t\t\tdocument.title = 'filip's notebook â†’ ' + post.title;\n\t\t\t}\n\n\t\t\tBlazeLayout.render('main', {content: 'home'});\n\t\t}\n\t}\n});\n\n// project routes\nvar projects = FlowRouter.group({\n\tprefix: '/projects',\n\tname: 'projects'\n});\n\nprojects.route('/', {\n\tsubscriptions: function(params, queryParams) {\n\t\tthis.register('projects', Meteor.subscribe('projects'));\n\t},\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\treset();\n\t\t\tBlazeLayout.render('main', {content: 'projects'});\n\t\t\tdocument.title = 'filip's notebook â†’ projects';\n\t\t}\n\t}\n});\n\nprojects.route('/:project', {\n\tsubscriptions: function(params, queryParams) {\n\t\tthis.register('projects', Meteor.subscribe('projects'));\n\t},\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\treset();\n\t\t\tBlazeLayout.render('main', {content: 'projects'});\n\t\t\tSession.set('viewingProject', true);\n\t\t}\n\t}\n});\n\n// about route\nFlowRouter.route('/about', {\n\tsubscriptions: function(params, queryParams) {\n\t\tthis.register('projects', Meteor.subscribe('projects'));\n\t},\n\taction: function() {\n\t\tif ( Meteor.isClient ) {\n\t\t\treset();\n\t\t\tBlazeLayout.render('main', {content: 'projects'});\n\t\t\tSession.set('viewingProject', true);\n\t\t\tSession.set('project', 'about');\n\t\t}\n\t}\n});"]}